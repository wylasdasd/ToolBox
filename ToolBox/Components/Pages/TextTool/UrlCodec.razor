@page "/url-codec"

@namespace ToolBox.Components.Pages.TextTool

@inherits MvvmComponentBase<UrlCodecVM>

<MudStack Row="true" AlignItems="AlignItems.Baseline" Spacing="4" Class="mb-4">
    <MudText Typo="Typo.h4">URL 编解码</MudText>
    <MudText>原文与 URL 编码互转。</MudText>
</MudStack>

<MudPaper Class="pa-4 mb-4" Elevation="1">
    <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center" Class="mb-3">
        <MudCheckBox T="bool" @bind-Value="ViewModel.UseEscapeDataString" Label="使用 EscapeDataString（空格为 %20）" />
        <MudSpacer />
        <MudButton Variant="Variant.Outlined" OnClick="() => ViewModel.Clear()">清空</MudButton>
    </MudStack>

    <MudGrid>
        <MudItem xs="12" md="6">
            <MudText Typo="Typo.h6" GutterBottom="true">原文</MudText>
            <MudTextField T="string" @bind-Value="ViewModel.PlainText"
                          Variant="Variant.Outlined"
                          TextFieldType="TextFieldType.MultiLine"
                          Lines="10"
                          Immediate="true"
                          Class="urlcodec-textarea" />
            <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-3" OnClick="() => ViewModel.Encode()">
                编码
            </MudButton>
        </MudItem>
        <MudItem xs="12" md="6">
            <MudText Typo="Typo.h6" GutterBottom="true">URL 编码</MudText>
            <MudTextField T="string" @bind-Value="ViewModel.EncodedText"
                          Variant="Variant.Outlined"
                          TextFieldType="TextFieldType.MultiLine"
                          Lines="10"
                          Immediate="true"
                          Class="urlcodec-textarea" />
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" Class="mt-3" OnClick="() => ViewModel.Decode()">
                解码
            </MudButton>
        </MudItem>
    </MudGrid>
</MudPaper>

@if (!string.IsNullOrWhiteSpace(ViewModel.ErrorMessage))
{
    <MudAlert Severity="Severity.Error" Dense="true">@ViewModel.ErrorMessage</MudAlert>
}
