@page "/diff"
@namespace ToolBox.Components.Pages
@inherits MvvmComponentBase<DiffViewerVM>
@using BlazorTextDiff

<MudStack Row="true" AlignItems="AlignItems.Baseline" Spacing="4" Class="mb-4">
    <MudText Typo="Typo.h4">文本差异对比</MudText>
    <MudText>对比两段文本差异</MudText>
</MudStack>

<MudGrid Spacing="2">
    <MudItem xs="12" md="6">
        <MudTextField T="string" @bind-Value="ViewModel.Text1"
                      Label="文本 1"
                      Immediate="true"
                      Variant="Variant.Outlined"
                      TextFieldType="TextFieldType.MultiLine"
                      Lines="8" />
    </MudItem>
    <MudItem xs="12" md="6">
        <MudTextField T="string" @bind-Value="ViewModel.Text2" 
                      Label="文本 2"
                      Immediate="true"
                      Variant="Variant.Outlined"
                      TextFieldType="TextFieldType.MultiLine"
                      Lines="8" />
    </MudItem>
</MudGrid>

<MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center" Class="mt-3">
    <MudCheckBox T="bool" @bind-Value="ViewModel.IgnoreWhitespace" Label="忽略空白差异" />
    <MudCheckBox T="bool" @bind-Value="ViewModel.IgnoreCase" Label="忽略大小写" />
    <MudCheckBox T="bool" @bind-Value="ViewModel.CollapseContent" Label="展开/收缩" />
</MudStack>



<MudPaper Class="mt-4">
    <TextDiff OldText="@ViewModel.Text1"
                NewText="@ViewModel.Text2"
                IgnoreCase="@ViewModel.IgnoreCase"
                IgnoreWhiteSpace="@ViewModel.IgnoreWhitespace"
                CollapseContent="@ViewModel.CollapseContent"
            >
        <Header>
            <MudStack Row="true" Spacing="2" AlignItems="AlignItems.Center" Class="diff-stats">
                <MudChip T="string" Variant="Variant.Outlined" Color="Color.Success">新增 @context.LineAdditionCount</MudChip>
                <MudChip T="string" Variant="Variant.Outlined" Color="Color.Error">删除 @context.LineDeletionCount</MudChip>
                <MudChip T="string" Variant="Variant.Outlined" Color="Color.Info">变更 @context.LineModificationCount</MudChip>
            </MudStack>
        </Header>
    </TextDiff>
</MudPaper>
